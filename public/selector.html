<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Generación</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;300;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style_selection.css">
</head>
<body>

  <header>
    <h1 id="titulo-generacion">Generación 202X</h1>
    <h2>Seleccione las fotos que desea</h2>
    <button onclick="enviarSeleccion()">Descargar selección</button>
  </header>

  <section class="galeria" id="galeria">
    <!-- Imágenes generadas por JS -->
  </section>

<script>
  const params = new URLSearchParams(window.location.search);
  const generacion = params.get('gen');

  if (!generacion) {
    document.body.innerHTML = "<h1 style='color: red; font-family: Montserrat; margin-top: 100px;'>Error: No se especificó ninguna generación</h1>";
    throw new Error("No se proporcionó el parámetro 'gen'");
  }

  document.getElementById('titulo-generacion').innerText = `Generación ${generacion}`;

  const galeria = document.getElementById('galeria');
  fetch(`/api/fotos?gen=${generacion}`)
  .then(res => res.json())
  .then(imagenes => {
    imagenes.forEach(({ thumb, full }, index) => {
      const label = document.createElement('div');
      label.className = 'foto-label';
      label.innerHTML = `
        <img src="${thumb}" alt="foto ${index + 1}" data-foto="${full}">
        <span>foto ${index + 1}</span>
      `;
      galeria.appendChild(label);
    });

    document.querySelectorAll('.galeria img').forEach(img => {
      img.addEventListener('click', () => {
        img.classList.toggle('seleccionada');
      });
    });
  })
  .catch(err => {
    galeria.innerHTML = '<p style="color:red">Error al cargar imágenes</p>';
    console.error(err);
  });


    function enviarSeleccion() {
      // Aquí podrías hacer una descarga o enviar al servidor
      alert('Funcionalidad de descarga aún no implementada.');
    }
</script>


</body>
</html>
